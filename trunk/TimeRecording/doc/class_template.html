<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>TimeRecording: Template Klassenreferenz</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Erzeugt von Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Hauptseite</span></a></li>
      <li class="current"><a href="annotated.html"><span>Klassen</span></a></li>
      <li><a href="files.html"><span>Dateien</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Auflistung&nbsp;der&nbsp;Klassen</span></a></li>
      <li><a href="hierarchy.html"><span>Klassenhierarchie</span></a></li>
      <li><a href="functions.html"><span>Klassen-Elemente</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Template Klassenreferenz</h1><!-- doxytag: class="Template" --><div class="dynheader">
Klassendiagramm für Template:</div>
<div class="dynsection">

<p><center><img src="class_template.png" usemap="#Template_map" border="0" alt=""></center>
<map name="Template_map">
<area href="class_email.html" alt="Email" shape="rect" coords="0,56,62,80">
</map>
</div>

<p>
<a href="class_template-members.html">Aufstellung aller Elemente</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Öffentliche Methoden</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#814922d791d909c27f6dc7db93829964">__construct</a> ($parameters=array())</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#a2f358a1c51806e08d35cc1b674b2f6a">__destruct</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#3bb2eb4b98aebbfa4310523c4a3688ad">clean_ob</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#f5ef4a35c20925139500208d32cb61d9">preload</a> ($list=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#4d4af064d58dd2aafa5459a228bdb584">import</a> ($list=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#8580cc17a248c0fa9434639cbe37bd1b">load</a> ($name, $force_reload=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#58e32e7c796ae46e37f4e3a1392eb21e">assign</a> ($name, $search, $replace=&quot;EMPTY&quot;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#331ba6a6f635deea63d176dd80eb5ea3">get</a> ($name, $force_reload=false)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#ed3ab49b2510abdcd71beac21fd1e45e">compress</a> (&amp;$buffer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#31770a953650ee75daa6e8383a06d130">output</a> ($name, $type=&quot;html&quot;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#9b300c1052c8e330d38e887ada506607">get_parsed</a> ($name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#3f0ce81c841de02d5b5c2501f9d1e56e">headers</a> ($type=&quot;html&quot;, $maxage=0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#7a805c7ecbaa03eec906d433af09e804">wraplongwords</a> (&amp;$text, $maxlen=64)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#09e1b9993524b6b6d38e4472a828d474">save_newlines</a> (&amp;$text)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#045a6de5bbab0abfdb67fe4d2a79cd94">restore_newlines</a> (&amp;$text)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#ba6bb377466a0592aaedebe6a3518594">accepts_gzip</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#339c7c8616136872dc7aa1571339d418">special_chars</a> (&amp;$content)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#94df1a5e3d8270ecc99d74927f456372">create_select</a> ($array, $selected=&quot;&quot;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#33f28ea990f28b657b61f54926452d79">replace_data_from_array</a> (&amp;$data, &amp;$array)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#8b6097874b0e2ad621bffe7a70ace60c">align_right</a> ($text, $maxlen=16)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#2c26858a0833404049ac335d2dac3906">menu_insert_spacer</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#0802cb2769b3aee83cf3458918a8fdd0">menu_insert_entry</a> ($name, $href, $access_key=false, $selected=false, $target=&quot;_self&quot;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#0d22097e1bf560ef7d4aba58c7b1e7fe">menu_get</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#13f26a9fe366b92f0897785a3d01f9be">use_database</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Private Attribute</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#0aa730ee4f211368b447c6e3a52c935c">$template</a> = array()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#d330a17c8ff788dcba48bd00e1d64eb2">$assigned</a> = array()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#f6525f2432c8c870c5c25091098aba7c">$debug_off</a> = true</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#8f80b6b931c01e6795bed770fb0605d6">$do_compress</a> = true</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#ef233f4654c3c598680b132012fa6800">$sql_table</a> = false</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#848a4caabd12c5c9bb39a5a4496693e8">$sql_type</a> = false</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#7824aefa3d521797b04ec59ea5166861">$debugout</a> = &quot;&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#70c2f52d8d0837df5d73da6969b964c3">$menu_content</a> = &quot;&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#a5a9b9e6807c0377a4ac37a1f4e1eb20">$menu_spacer</a> = false</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_template.html#c99b87e6e1e3d0106f24bcd6681c906e">$tpl_folder</a> = &quot;./templates/&quot;</td></tr>

</table>
<hr><a name="_details"></a><h2>Ausführliche Beschreibung</h2>
The <a class="el" href="class_template.html">Template</a>:: class implements the HTML-templates and output-engine.<p>
Patrick Kracht &lt;<a href="mailto:patrick.kracht@googlemail.com">patrick.kracht@googlemail.com</a>&gt;  Thorsten Moll &lt;<a href="mailto:thorsten.moll@googlemail.com">thorsten.moll@googlemail.com</a>&gt;<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>Patrick Kracht &lt;<a href="mailto:patrick.kracht@googlemail.com">patrick.kracht@googlemail.com</a>&gt; <p>
Thorsten Moll &lt;<a href="mailto:thorsten.moll@googlemail.com">thorsten.moll@googlemail.com</a>&gt; </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00012">12</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<hr><h2>Beschreibung der Konstruktoren und Destruktoren</h2>
<a class="anchor" name="814922d791d909c27f6dc7db93829964"></a><!-- doxytag: member="Template::__construct" ref="814922d791d909c27f6dc7db93829964" args="($parameters=array())" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.__construct           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parameters</em> = <code>array()</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
constructor read config-file and initializes the vars<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>config-file-location</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Erneute Implementation in <a class="el" href="class_email.html#a602f3aed29f389f7649ffe3c60b2dd7">Email</a>.</p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00034">34</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00035"></a>00035                 {
<a name="l00036"></a>00036                         $this-&gt;tpl_folder  = (isset($parameters[0])) ? $parameters[0] : <span class="stringliteral">"./templates/"</span>;
<a name="l00037"></a>00037                         $this-&gt;debug_off   = (isset($parameters[1])) ? $parameters[1] : <span class="keyword">true</span>;
<a name="l00038"></a>00038                         $this-&gt;do_compress = (isset($parameters[2])) ? $parameters[2] : <span class="keyword">true</span>;
<a name="l00039"></a>00039                         $this-&gt;menu_spacer = <span class="keyword">false</span>;
<a name="l00040"></a>00040                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a2f358a1c51806e08d35cc1b674b2f6a"></a><!-- doxytag: member="Template::__destruct" ref="a2f358a1c51806e08d35cc1b674b2f6a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.__destruct           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
destructor (nop)<p>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00049">49</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00050"></a>00050                 {
<a name="l00051"></a>00051                 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Dokumentation der Elementfunktionen</h2>
<a class="anchor" name="3bb2eb4b98aebbfa4310523c4a3688ad"></a><!-- doxytag: member="Template::clean_ob" ref="3bb2eb4b98aebbfa4310523c4a3688ad" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.clean_ob           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
starts new clean output buffer<p>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00060">60</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00061"></a>00061                 {
<a name="l00062"></a>00062                         <span class="keywordflow">if</span> (!ob_get_length() || !ob_get_level())
<a name="l00063"></a>00063                                 {
<a name="l00064"></a>00064                                         session_cache_limiter(<span class="stringliteral">'must-revalidate'</span>);
<a name="l00065"></a>00065                                         ob_start();
<a name="l00066"></a>00066                                         ob_clean();
<a name="l00067"></a>00067                                 }
<a name="l00068"></a>00068                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f5ef4a35c20925139500208d32cb61d9"></a><!-- doxytag: member="Template::preload" ref="f5ef4a35c20925139500208d32cb61d9" args="($list=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.preload           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>list</em> = <code>false</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
preload all templates by default (or selected by array/string)<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mixed</em>&nbsp;</td><td>[default=false], array or string (separator ',')</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00079">79</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00080"></a>00080                 {
<a name="l00081"></a>00081                         <span class="comment">// build specific sql query statements</span>
<a name="l00082"></a>00082                         <span class="keywordflow">if</span> (is_array($list))
<a name="l00083"></a>00083                                 {
<a name="l00084"></a>00084                                         $list = implode(<span class="stringliteral">"','"</span>, $list);
<a name="l00085"></a>00085                                         $list = <span class="stringliteral">" WHERE file IN ( '$list' )"</span>;
<a name="l00086"></a>00086                                 }
<a name="l00087"></a>00087                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_string($list))
<a name="l00088"></a>00088                                 {
<a name="l00089"></a>00089                                         $list = str_replace(<span class="stringliteral">","</span>, <span class="stringliteral">"','"</span>, $list);
<a name="l00090"></a>00090                                         $list = <span class="stringliteral">" WHERE file IN ( '$list' )"</span>;
<a name="l00091"></a>00091                                 }
<a name="l00092"></a>00092                                 
<a name="l00093"></a>00093                         <span class="comment">// get templates table in database</span>
<a name="l00094"></a>00094                         $table  = $_SESSION[<span class="stringliteral">"_TplSqlTable"</span>];
<a name="l00095"></a>00095                         
<a name="l00096"></a>00096                         $query  = <span class="stringliteral">"SELECT file, content FROM $table $list;"</span>;
<a name="l00097"></a>00097                         $result = $_SESSION[$_SESSION[<span class="stringliteral">"_SqlType"</span>]]-&gt;query($query);
<a name="l00098"></a>00098                         
<a name="l00099"></a>00099                         <span class="comment">// prebuffer every found template</span>
<a name="l00100"></a>00100                         <span class="keywordflow">while</span> ($row = $_SESSION[$_SESSION[<span class="stringliteral">"_SqlType"</span>]]-&gt;fetch_array())
<a name="l00101"></a>00101                                 {
<a name="l00102"></a>00102                                         $this-&gt;<span class="keyword">template</span>[ $row[<span class="stringliteral">'file'</span>] ] = $row[<span class="stringliteral">'content'</span>];
<a name="l00103"></a>00103                                         $this-&gt;assigned[ $row[<span class="stringliteral">'file'</span>] ] = array();
<a name="l00104"></a>00104                                 }
<a name="l00105"></a>00105                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4d4af064d58dd2aafa5459a228bdb584"></a><!-- doxytag: member="Template::import" ref="4d4af064d58dd2aafa5459a228bdb584" args="($list=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.import           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>list</em> = <code>false</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
import all templates by default (or selected by array/string)<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mixed</em>&nbsp;</td><td>[default=false], array or string (separator ',')</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Rückgabe:</b></dt><dd>mixed affected_rows by insert query (false if error)</dd></dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00118">118</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00119"></a>00119                 {
<a name="l00120"></a>00120                         <span class="comment">//Templates aus der Liste in die Datenbank importieren</span>
<a name="l00121"></a>00121                         $values = <span class="stringliteral">""</span>;
<a name="l00122"></a>00122                         $files  = array();
<a name="l00123"></a>00123                         
<a name="l00124"></a>00124                         <span class="keywordflow">if</span> (! $list)
<a name="l00125"></a>00125                                 {
<a name="l00126"></a>00126                                         $dir = dir($this-&gt;tpl_folder);
<a name="l00127"></a>00127                                         <span class="keywordflow">while</span> ($file = $dir-&gt;read())
<a name="l00128"></a>00128                                                 {
<a name="l00129"></a>00129                                                         <span class="keywordflow">if</span> (strlen($file) &gt; 2 &amp;&amp; ! is_dir($file) &amp;&amp; $file {0} != <span class="stringliteral">"."</span>)
<a name="l00130"></a>00130                                                                 {
<a name="l00131"></a>00131                                                                         $files[] = $file;
<a name="l00132"></a>00132                                                                 }
<a name="l00133"></a>00133                                                 }
<a name="l00134"></a>00134                                         $dir-&gt;close();
<a name="l00135"></a>00135                                 }
<a name="l00136"></a>00136                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_string($list))
<a name="l00137"></a>00137                                 {
<a name="l00138"></a>00138                                         $files = explode(<span class="charliteral">','</span>, $list);
<a name="l00139"></a>00139                                 }
<a name="l00140"></a>00140                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_array($list))
<a name="l00141"></a>00141                                 {
<a name="l00142"></a>00142                                         $files = $list;
<a name="l00143"></a>00143                                 }
<a name="l00144"></a>00144                         <span class="keywordflow">else</span>
<a name="l00145"></a>00145                                 {
<a name="l00146"></a>00146                                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00147"></a>00147                                 }
<a name="l00148"></a>00148                                 
<a name="l00149"></a>00149                         <span class="comment">// prepare query statement for all found files</span>
<a name="l00150"></a>00150                         <span class="keywordflow">foreach</span>($files as $file)
<a name="l00151"></a>00151                         {
<a name="l00152"></a>00152                                 $file     = trim($file);
<a name="l00153"></a>00153                                 $filename = $this-&gt;tpl_folder.$file;
<a name="l00154"></a>00154                                 $content  = file_get_contents($filename);
<a name="l00155"></a>00155                                 $content  = addslashes($content);
<a name="l00156"></a>00156                                 $values  .= (($values == <span class="stringliteral">""</span>) ? <span class="stringliteral">""</span> : <span class="stringliteral">", "</span>) . <span class="stringliteral">"( '$file', '$content' )"</span>;
<a name="l00157"></a>00157                         }
<a name="l00158"></a>00158                         
<a name="l00159"></a>00159                         <span class="comment">// try to renew complete table of templates</span>
<a name="l00160"></a>00160                         <span class="keywordflow">try</span>
<a name="l00161"></a>00161                                 {
<a name="l00162"></a>00162                                         $table = $_SESSION[<span class="stringliteral">"_TplSqlTable"</span>];
<a name="l00163"></a>00163                                         $_SESSION[$_SESSION[<span class="stringliteral">"_SqlType"</span>]]-&gt;query(<span class="stringliteral">"TRUNCATE TABLE $table;"</span>);
<a name="l00164"></a>00164                                         $_SESSION[$_SESSION[<span class="stringliteral">"_SqlType"</span>]]-&gt;query(<span class="stringliteral">"INSERT INTO $table ( file , content ) VALUES $values;"</span>);
<a name="l00165"></a>00165                                         <span class="keywordflow">return</span> $_SESSION[$_SESSION[<span class="stringliteral">"_SqlType"</span>]]-&gt;affected_rows();
<a name="l00166"></a>00166                                 }
<a name="l00167"></a>00167                         <span class="keywordflow">catch</span> (Exception $e)
<a name="l00168"></a>00168                                 {
<a name="l00169"></a>00169                                         die($e-&gt;getMessage());
<a name="l00170"></a>00170                                 }
<a name="l00171"></a>00171                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="8580cc17a248c0fa9434639cbe37bd1b"></a><!-- doxytag: member="Template::load" ref="8580cc17a248c0fa9434639cbe37bd1b" args="($name, $force_reload=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.load           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>force_reload</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
loads template with $name in internal buffer-array<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>template file name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>force overwriting buffer content *  public</td></tr>
  </table>
</dl>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00183">183</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Benutzt <a class="el" href="class_8template_8php-source.html#l00247">assign()</a>.</p>

<p>Wird benutzt von <a class="el" href="class_8template_8php-source.html#l00269">get()</a> und <a class="el" href="class_8template_8php-source.html#l00313">output()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00184"></a>00184                 {
<a name="l00185"></a>00185                         <span class="comment">// use post and get session id, if no cookies</span>
<a name="l00186"></a>00186                         <span class="keywordflow">if</span> (ini_get(<span class="stringliteral">"session.use_cookies"</span>) != <span class="stringliteral">"1"</span>)
<a name="l00187"></a>00187                                 {
<a name="l00188"></a>00188                                         $this-&gt;<a class="code" href="class_template.html#58e32e7c796ae46e37f4e3a1392eb21e">assign</a>($name, <span class="stringliteral">"{{SID}}"</span>, session_id());
<a name="l00189"></a>00189                                 }
<a name="l00190"></a>00190                         <span class="keywordflow">else</span>
<a name="l00191"></a>00191                                 {
<a name="l00192"></a>00192                                         $this-&gt;<a class="code" href="class_template.html#58e32e7c796ae46e37f4e3a1392eb21e">assign</a>($name, <span class="stringliteral">"{{SID}}"</span>, <span class="stringliteral">""</span>);
<a name="l00193"></a>00193                                 }
<a name="l00194"></a>00194                                 
<a name="l00195"></a>00195                         <span class="comment">// default assignments for system use in forms and links</span>
<a name="l00196"></a>00196                         $this-&gt;<a class="code" href="class_template.html#58e32e7c796ae46e37f4e3a1392eb21e">assign</a>($name, <span class="stringliteral">"{{PAGE}}"</span>,   $_SESSION[<span class="stringliteral">"_PageID.current"</span>]);
<a name="l00197"></a>00197                         $this-&gt;<a class="code" href="class_template.html#58e32e7c796ae46e37f4e3a1392eb21e">assign</a>($name, <span class="stringliteral">"{{ACTION}}"</span>, $_SESSION[<span class="stringliteral">"_Action"</span>]);
<a name="l00198"></a>00198                         
<a name="l00199"></a>00199                         <span class="comment">// if template loaded, don't waste time and return</span>
<a name="l00200"></a>00200                         <span class="keywordflow">if</span> (isset($this-&gt;<span class="keyword">template</span>[$name]) &amp;&amp; ! $force_reload) <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00201"></a>00201                         
<a name="l00202"></a>00202                         <span class="comment">// try loading from database, is options set</span>
<a name="l00203"></a>00203                         <span class="keywordflow">if</span> ($_SESSION[<span class="stringliteral">"_TplSqlTable"</span>] &amp;&amp; $_SESSION[<span class="stringliteral">"_SqlType"</span>])
<a name="l00204"></a>00204                                 {
<a name="l00205"></a>00205                                         <span class="keywordflow">try</span>
<a name="l00206"></a>00206                                                 {
<a name="l00207"></a>00207                                                         $table = $_SESSION[<span class="stringliteral">"_TplSqlTable"</span>];
<a name="l00208"></a>00208                                                         $query = <span class="stringliteral">"SELECT content FROM ${table} WHERE file = '${name}';"</span>;
<a name="l00209"></a>00209                                                         $array = $_SESSION[$_SESSION[<span class="stringliteral">"_SqlType"</span>]]-&gt;query_first($query);
<a name="l00210"></a>00210                                                         $this-&gt;<span class="keyword">template</span>[$name] = $array[<span class="stringliteral">"content"</span>];
<a name="l00211"></a>00211                                                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00212"></a>00212                                                 }
<a name="l00213"></a>00213                                         <span class="keywordflow">catch</span> (Exception $e)
<a name="l00214"></a>00214                                                 {
<a name="l00215"></a>00215                                                         echo $e-&gt;getMessage();
<a name="l00216"></a>00216                                                 }
<a name="l00217"></a>00217                                 }
<a name="l00218"></a>00218                                 
<a name="l00219"></a>00219                         <span class="comment">// load template or die</span>
<a name="l00220"></a>00220                         $filename = $this-&gt;tpl_folder.$name;
<a name="l00221"></a>00221                         <span class="keywordflow">if</span> (! file_exists($filename) || is_dir($filename))
<a name="l00222"></a>00222                                 {
<a name="l00223"></a>00223                                         <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">"could not load template '$name' from '$filename'!"</span>);
<a name="l00224"></a>00224                                 }
<a name="l00225"></a>00225                                 
<a name="l00226"></a>00226                         $this-&gt;<span class="keyword">template</span>[$name] = file_get_contents($filename);
<a name="l00227"></a>00227                         
<a name="l00228"></a>00228                         <span class="comment">// prepare array for assigned substitutions</span>
<a name="l00229"></a>00229                         <span class="keywordflow">if</span> (! array_key_exists($name, $this-&gt;assigned))
<a name="l00230"></a>00230                                 {
<a name="l00231"></a>00231                                         array_push($this-&gt;assigned, array($name =&gt; array()));
<a name="l00232"></a>00232                                 }
<a name="l00233"></a>00233                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="58e32e7c796ae46e37f4e3a1392eb21e"></a><!-- doxytag: member="Template::assign" ref="58e32e7c796ae46e37f4e3a1392eb21e" args="($name, $search, $replace=&quot;EMPTY&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.assign           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>search</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>replace</em> = <code>&quot;EMPTY&quot;</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
assign a replacement in template $name<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>template file name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mixed</em>&nbsp;</td><td>string (search for something) OR array key = search, value = replace </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>replace with something (if $search is string)</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00247">247</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Wird benutzt von <a class="el" href="class_8template_8php-source.html#l00183">load()</a> und <a class="el" href="class_8template_8php-source.html#l00313">output()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00248"></a>00248                 {
<a name="l00249"></a>00249                         <span class="keywordflow">if</span> (is_array($search))
<a name="l00250"></a>00250                                 {
<a name="l00251"></a>00251                                         <span class="keywordflow">foreach</span>($search as $key =&gt; $value) $this-&gt;assigned[$name][$key] = $value;
<a name="l00252"></a>00252                                 }
<a name="l00253"></a>00253                         <span class="keywordflow">else</span>
<a name="l00254"></a>00254                                 {
<a name="l00255"></a>00255                                         $this-&gt;assigned[$name][$search] = $replace;
<a name="l00256"></a>00256                                 }
<a name="l00257"></a>00257                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="331ba6a6f635deea63d176dd80eb5ea3"></a><!-- doxytag: member="Template::get" ref="331ba6a6f635deea63d176dd80eb5ea3" args="($name, $force_reload=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.get           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>force_reload</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
returns get_parsed content of template in buffer<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>template file name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>force reloading buffer content</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00269">269</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Benutzt <a class="el" href="class_8template_8php-source.html#l00416">get_parsed()</a>, <a class="el" href="class_8template_8php-source.html#l00183">load()</a> und <a class="el" href="class_8template_8php-source.html#l00541">special_chars()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00270"></a>00270                 {
<a name="l00271"></a>00271                         <span class="keywordflow">if</span> (! isset($this-&gt;<span class="keyword">template</span>[$name]) || $force_reload)
<a name="l00272"></a>00272                                 {
<a name="l00273"></a>00273                                         $this-&gt;<a class="code" href="class_template.html#8580cc17a248c0fa9434639cbe37bd1b">load</a>($name, $force_reload);
<a name="l00274"></a>00274                                 }
<a name="l00275"></a>00275                         $buffer = $this-&gt;<a class="code" href="class_template.html#9b300c1052c8e330d38e887ada506607">get_parsed</a>($name);
<a name="l00276"></a>00276                         $this-&gt;<a class="code" href="class_template.html#339c7c8616136872dc7aa1571339d418">special_chars</a>($buffer);
<a name="l00277"></a>00277                         <span class="keywordflow">return</span> $buffer;
<a name="l00278"></a>00278                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ed3ab49b2510abdcd71beac21fd1e45e"></a><!-- doxytag: member="Template::compress" ref="ed3ab49b2510abdcd71beac21fd1e45e" args="(&amp;$buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.compress           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>buffer</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
compress template (remove not needed chars)<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>&amp;string</em>&nbsp;</td><td>reference to source html for compression</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00289">289</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Benutzt <a class="el" href="class_8template_8php-source.html#l00507">restore_newlines()</a>.</p>

<p>Wird benutzt von <a class="el" href="class_8template_8php-source.html#l00313">output()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00290"></a>00290                 {
<a name="l00291"></a>00291                         $length = strlen($buffer);
<a name="l00292"></a>00292                         $s = array(<span class="stringliteral">"\t"</span> =&gt; <span class="stringliteral">""</span>, <span class="stringliteral">"\n"</span> =&gt; <span class="stringliteral">" "</span>, <span class="stringliteral">"\r"</span> =&gt; <span class="stringliteral">" "</span>, <span class="stringliteral">"   "</span> =&gt; <span class="stringliteral">" "</span>, <span class="stringliteral">"  "</span> =&gt; <span class="stringliteral">" "</span>, <span class="stringliteral">"&gt; &lt;"</span> =&gt; <span class="stringliteral">"&gt;&lt;"</span>);
<a name="l00293"></a>00293                         <span class="keywordflow">do</span>
<a name="l00294"></a>00294                                 {
<a name="l00295"></a>00295                                         $len1 = strlen($buffer);
<a name="l00296"></a>00296                                         $buffer = str_replace(array_keys($s), array_values($s), $buffer);
<a name="l00297"></a>00297                                 }
<a name="l00298"></a>00298                         <span class="keywordflow">while</span> ($len1 &gt; strlen($buffer));
<a name="l00299"></a>00299                         $this-&gt;<a class="code" href="class_template.html#045a6de5bbab0abfdb67fe4d2a79cd94">restore_newlines</a>($buffer);
<a name="l00300"></a>00300                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="31770a953650ee75daa6e8383a06d130"></a><!-- doxytag: member="Template::output" ref="31770a953650ee75daa6e8383a06d130" args="($name, $type=&quot;html&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.output           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>type</em> = <code>&quot;html&quot;</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
finally sends complete template $name, get_parsed and compressed (if setup in config-file)<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>template file name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>type of output (html,js,css...)</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00313">313</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Benutzt <a class="el" href="class_8template_8php-source.html#l00521">accepts_gzip()</a>, <a class="el" href="class_8template_8php-source.html#l00247">assign()</a>, <a class="el" href="class_8template_8php-source.html#l00289">compress()</a>, <a class="el" href="class_8template_8php-source.html#l00416">get_parsed()</a>, <a class="el" href="class_8template_8php-source.html#l00434">headers()</a>, <a class="el" href="class_8template_8php-source.html#l00183">load()</a>, <a class="el" href="class_8template_8php-source.html#l00684">menu_get()</a> und <a class="el" href="class_8template_8php-source.html#l00541">special_chars()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00314"></a>00314                 {
<a name="l00315"></a>00315                         <span class="comment">// if template not buffered, try to load it</span>
<a name="l00316"></a>00316                         <span class="keywordflow">if</span> (! isset($this-&gt;<span class="keyword">template</span>[$name]))
<a name="l00317"></a>00317                                 {
<a name="l00318"></a>00318                                         $this-&gt;<a class="code" href="class_template.html#8580cc17a248c0fa9434639cbe37bd1b">load</a>($name);
<a name="l00319"></a>00319                                 }
<a name="l00320"></a>00320                                 
<a name="l00321"></a>00321                         <span class="comment">// if template not buffered again, trow exception</span>
<a name="l00322"></a>00322                         <span class="keywordflow">if</span> (! isset($this-&gt;<span class="keyword">template</span>[$name]))
<a name="l00323"></a>00323                                 {
<a name="l00324"></a>00324                                         die(<span class="stringliteral">"template '$name' not found!"</span>);
<a name="l00325"></a>00325                                 }
<a name="l00326"></a>00326                                 
<a name="l00327"></a>00327                         $menu   = $this-&gt;<a class="code" href="class_template.html#0d22097e1bf560ef7d4aba58c7b1e7fe">menu_get</a>();
<a name="l00328"></a>00328                         
<a name="l00329"></a>00329                         <span class="comment">// output each timer, if present</span>
<a name="l00330"></a>00330                         <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">"TIMER.MYSQL"</span>]))
<a name="l00331"></a>00331                                 {
<a name="l00332"></a>00332                                         $this-&gt;<a class="code" href="class_template.html#58e32e7c796ae46e37f4e3a1392eb21e">assign</a>($name, <span class="stringliteral">"&lt;!--TIMERS_MYSQL--&gt;"</span>, $_SESSION[<span class="stringliteral">"TIMER.MYSQL"</span>].<span class="stringliteral">"\n"</span>);
<a name="l00333"></a>00333                                         echo $_SESSION[<span class="stringliteral">"TIMER.MYSQL"</span>].<span class="stringliteral">"\n"</span>;
<a name="l00334"></a>00334                                 }
<a name="l00335"></a>00335                         <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">"TIMER.MSSQL"</span>]))
<a name="l00336"></a>00336                                 {
<a name="l00337"></a>00337                                         $this-&gt;<a class="code" href="class_template.html#58e32e7c796ae46e37f4e3a1392eb21e">assign</a>($name, <span class="stringliteral">"&lt;!--TIMERS_MSSQL--&gt;"</span>, $_SESSION[<span class="stringliteral">"TIMER.MSSQL"</span>].<span class="stringliteral">"\n"</span>);
<a name="l00338"></a>00338                                         echo $_SESSION[<span class="stringliteral">"TIMER.MSSQL"</span>].<span class="stringliteral">"\n"</span>;
<a name="l00339"></a>00339                                 }
<a name="l00340"></a>00340                         <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">"TIMER.PHP"</span>]))
<a name="l00341"></a>00341                                 {
<a name="l00342"></a>00342                                         $this-&gt;<a class="code" href="class_template.html#58e32e7c796ae46e37f4e3a1392eb21e">assign</a>($name, <span class="stringliteral">"&lt;!--TIMERS_PHP--&gt;"</span>, $_SESSION[<span class="stringliteral">"TIMER.PHP"</span>].<span class="stringliteral">"\n"</span>);
<a name="l00343"></a>00343                                         echo $_SESSION[<span class="stringliteral">"TIMER.PHP"</span>].<span class="stringliteral">"\n"</span>;
<a name="l00344"></a>00344                                 }
<a name="l00345"></a>00345                                 
<a name="l00346"></a>00346                         <span class="comment">// assign visible components</span>
<a name="l00347"></a>00347                         $this-&gt;<a class="code" href="class_template.html#58e32e7c796ae46e37f4e3a1392eb21e">assign</a>($name, <span class="stringliteral">"&lt;!--MENU--&gt;"</span>,   $menu);
<a name="l00348"></a>00348                         $this-&gt;<a class="code" href="class_template.html#58e32e7c796ae46e37f4e3a1392eb21e">assign</a>($name, <span class="stringliteral">"&lt;!--ERRORS--&gt;"</span>, $_SESSION[<span class="stringliteral">"_Errors"</span>]);
<a name="l00349"></a>00349                         
<a name="l00350"></a>00350                         <span class="comment">// parse and replace assignments</span>
<a name="l00351"></a>00351                         $buffer = $this-&gt;<a class="code" href="class_template.html#9b300c1052c8e330d38e887ada506607">get_parsed</a>($name);
<a name="l00352"></a>00352                         
<a name="l00353"></a>00353                         <span class="comment">// fix special html-characters</span>
<a name="l00354"></a>00354                         $this-&gt;<a class="code" href="class_template.html#339c7c8616136872dc7aa1571339d418">special_chars</a>($buffer);
<a name="l00355"></a>00355                         
<a name="l00356"></a>00356                         <span class="comment">// fix replacements of {{SID}}</span>
<a name="l00357"></a>00357                         <span class="keywordflow">if</span> (ini_get(<span class="stringliteral">"session.use_cookies"</span>) != <span class="stringliteral">"1"</span>)
<a name="l00358"></a>00358                                 {
<a name="l00359"></a>00359                                         $buffer = str_replace(<span class="stringliteral">"{{SID}}"</span>, session_id(), $buffer);
<a name="l00360"></a>00360                                 }
<a name="l00361"></a>00361                         <span class="keywordflow">else</span>
<a name="l00362"></a>00362                                 {
<a name="l00363"></a>00363                                         $buffer = str_replace(<span class="stringliteral">"{{SID}}"</span>, <span class="stringliteral">""</span>, $buffer);
<a name="l00364"></a>00364                                 }
<a name="l00365"></a>00365                                 
<a name="l00366"></a>00366                         <span class="comment">// compress html source, if set</span>
<a name="l00367"></a>00367                         <span class="keywordflow">if</span> ($this-&gt;do_compress)
<a name="l00368"></a>00368                                 {
<a name="l00369"></a>00369                                         $this-&gt;<a class="code" href="class_template.html#ed3ab49b2510abdcd71beac21fd1e45e">compress</a>($buffer);
<a name="l00370"></a>00370                                 }
<a name="l00371"></a>00371                                 
<a name="l00372"></a>00372                         <span class="comment">// print performance infos hidden</span>
<a name="l00373"></a>00373                         echo $_SESSION[<span class="stringliteral">"MEMORY"</span>];
<a name="l00374"></a>00374                         
<a name="l00375"></a>00375                         <span class="comment">// save all previously sent output (with byte-order-mark-filter)</span>
<a name="l00376"></a>00376                         $obget = trim(ob_get_clean());
<a name="l00377"></a>00377                         $obget = str_replace(<span class="stringliteral">"\xef\xbb\xbf"</span>, <span class="stringliteral">""</span>, $obget);   <span class="comment">//BOM</span>
<a name="l00378"></a>00378                         $obget = strip_tags(utf8_encode($obget));
<a name="l00379"></a>00379                         
<a name="l00380"></a>00380                         <span class="comment">// if errormessages printed, append hidden or visible</span>
<a name="l00381"></a>00381                         <span class="keywordflow">if</span> (! empty($obget))
<a name="l00382"></a>00382                                 {
<a name="l00383"></a>00383                                         <span class="keywordflow">if</span> ($this-&gt;debug_off)
<a name="l00384"></a>00384                                                 {
<a name="l00385"></a>00385                                                         $buffer .= <span class="stringliteral">"\n&lt;!--\n"</span>.$obget.<span class="stringliteral">"\n--&gt;"</span>;
<a name="l00386"></a>00386                                                 }
<a name="l00387"></a>00387                                         <span class="keywordflow">else</span>
<a name="l00388"></a>00388                                                 {
<a name="l00389"></a>00389                                                         $buffer .= $obget;
<a name="l00390"></a>00390                                                 }
<a name="l00391"></a>00391                                 }
<a name="l00392"></a>00392                                 
<a name="l00393"></a>00393                         <span class="comment">// if gzip accepted, compress level 9</span>
<a name="l00394"></a>00394                         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_template.html#ba6bb377466a0592aaedebe6a3518594">accepts_gzip</a>())
<a name="l00395"></a>00395                                 {
<a name="l00396"></a>00396                                         $buffer = gzencode($buffer, 9);
<a name="l00397"></a>00397                                 }
<a name="l00398"></a>00398                                 
<a name="l00399"></a>00399                         <span class="comment">// send headers to browser and print page</span>
<a name="l00400"></a>00400                         $this-&gt;<a class="code" href="class_template.html#3f0ce81c841de02d5b5c2501f9d1e56e">headers</a>($type);
<a name="l00401"></a>00401                         header(<span class="stringliteral">"Content-Length: "</span>.strlen($buffer));
<a name="l00402"></a>00402                         echo $buffer;
<a name="l00403"></a>00403                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9b300c1052c8e330d38e887ada506607"></a><!-- doxytag: member="Template::get_parsed" ref="9b300c1052c8e330d38e887ada506607" args="($name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.get_parsed           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
do replacements (if using 'assign') and returns array of parsed templates<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>template file name</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Rückgabe:</b></dt><dd>array templates  public</dd></dl>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00416">416</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Wird benutzt von <a class="el" href="class_8template_8php-source.html#l00269">get()</a> und <a class="el" href="class_8template_8php-source.html#l00313">output()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00417"></a>00417                 {
<a name="l00418"></a>00418                         <span class="keywordflow">if</span> (array_key_exists($name, $this-&gt;assigned))
<a name="l00419"></a>00419                                 {
<a name="l00420"></a>00420                                         <span class="keywordflow">return</span> str_replace(array_keys($this-&gt;assigned[$name]), array_values($this-&gt;assigned[$name]), $this-&gt;<span class="keyword">template</span>[$name]);
<a name="l00421"></a>00421                                 }
<a name="l00422"></a>00422                         <span class="keywordflow">return</span> $this-&gt;<span class="keyword">template</span>[$name];
<a name="l00423"></a>00423                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3f0ce81c841de02d5b5c2501f9d1e56e"></a><!-- doxytag: member="Template::headers" ref="3f0ce81c841de02d5b5c2501f9d1e56e" args="($type=&quot;html&quot;, $maxage=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.headers           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>type</em> = <code>&quot;html&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>maxage</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
send headers to browser (no cookies after this point!)<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>type of output (html,css,js,...)</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00434">434</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Benutzt <a class="el" href="class_8template_8php-source.html#l00521">accepts_gzip()</a>.</p>

<p>Wird benutzt von <a class="el" href="class_8email_8php-source.html#l00037">Email.__construct()</a>, <a class="el" href="class_8email_8php-source.html#l00225">Email.create_head()</a>, <a class="el" href="class_8template_8php-source.html#l00313">output()</a>, <a class="el" href="class_8email_8php-source.html#l00126">Email.set_reply()</a> und <a class="el" href="class_8email_8php-source.html#l00109">Email.set_sender()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00435"></a>00435                 {
<a name="l00436"></a>00436                         <span class="comment">// send all headers to the browser</span>
<a name="l00437"></a>00437                         header(<span class="stringliteral">'Content-Language: de'</span>);
<a name="l00438"></a>00438                         header(<span class="stringliteral">'Content-Type: text/'</span> . $type . <span class="stringliteral">'; charset=UTF-8;'</span>);
<a name="l00439"></a>00439                         header(<span class="stringliteral">'Last-Modified: '</span> . gmdate(<span class="stringliteral">'D, d M Y H:i:s'</span>) . <span class="stringliteral">' GMT'</span>);
<a name="l00440"></a>00440                         header(<span class="stringliteral">'Content-Transfer-Encoding: UTF-8'</span>);
<a name="l00441"></a>00441                         header(<span class="stringliteral">'Date: '</span> . gmdate(<span class="stringliteral">'D, d M Y H:i:s'</span>) . <span class="stringliteral">' GMT'</span>);
<a name="l00442"></a>00442                         header(<span class="stringliteral">'Accept-Ranges: bytes'</span>);
<a name="l00443"></a>00443                         header(<span class="stringliteral">'Expires: '</span> . gmdate(<span class="stringliteral">'D, d M Y H:i:s'</span>, (time()+$maxage)) . <span class="stringliteral">' GMT'</span>);
<a name="l00444"></a>00444                         header(<span class="stringliteral">'Cache-Control: max-age='</span>.$maxage);
<a name="l00445"></a>00445                         header(<span class="stringliteral">'Pragma: no-cache'</span>);
<a name="l00446"></a>00446                         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_template.html#ba6bb377466a0592aaedebe6a3518594">accepts_gzip</a>())
<a name="l00447"></a>00447                                 {
<a name="l00448"></a>00448                                         header(<span class="stringliteral">'X-Compression: gzip'</span>);
<a name="l00449"></a>00449                                         header(<span class="stringliteral">'Content-Encoding: gzip'</span>);
<a name="l00450"></a>00450                                         header(<span class="stringliteral">'Vary: Accept-Encoding'</span>);
<a name="l00451"></a>00451                                 }
<a name="l00452"></a>00452                         <span class="keywordflow">else</span>
<a name="l00453"></a>00453                                 {
<a name="l00454"></a>00454                                         header(<span class="stringliteral">'X-Compression: None'</span>);
<a name="l00455"></a>00455                                 }
<a name="l00456"></a>00456                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7a805c7ecbaa03eec906d433af09e804"></a><!-- doxytag: member="Template::wraplongwords" ref="7a805c7ecbaa03eec906d433af09e804" args="(&amp;$text, $maxlen=64)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.wraplongwords           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>maxlen</em> = <code>64</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
wrap long words from $text at $maxlen (=64 default)<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>text to wrap </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>maximum length to wrap at</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00468">468</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00469"></a>00469                 {
<a name="l00470"></a>00470                         $mytext  = explode(<span class="stringliteral">" "</span>, trim($text));
<a name="l00471"></a>00471                         $newtext = array();
<a name="l00472"></a>00472                         <span class="keywordflow">foreach</span>($mytext as $k =&gt; $txt)
<a name="l00473"></a>00473                         {
<a name="l00474"></a>00474                                 <span class="keywordflow">if</span> (strlen($txt) &gt; $maxlen)
<a name="l00475"></a>00475                                         {
<a name="l00476"></a>00476                                                 $txt = wordwrap($txt, $maxlen, <span class="stringliteral">"- "</span>, <span class="keyword">true</span>);
<a name="l00477"></a>00477                                         }
<a name="l00478"></a>00478                                 $newtext[] = $txt;
<a name="l00479"></a>00479                         }
<a name="l00480"></a>00480                         $text = implode(<span class="stringliteral">" "</span>, $newtext);
<a name="l00481"></a>00481                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="09e1b9993524b6b6d38e4472a828d474"></a><!-- doxytag: member="Template::save_newlines" ref="09e1b9993524b6b6d38e4472a828d474" args="(&amp;$text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.save_newlines           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>text</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
replace newlines with invisible character (to save newlines in textareas for example)<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>text to save newlines</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00493">493</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00494"></a>00494                 {
<a name="l00495"></a>00495                         $text = str_replace(<span class="stringliteral">"\n"</span>, chr(31), $text);
<a name="l00496"></a>00496                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="045a6de5bbab0abfdb67fe4d2a79cd94"></a><!-- doxytag: member="Template::restore_newlines" ref="045a6de5bbab0abfdb67fe4d2a79cd94" args="(&amp;$text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.restore_newlines           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>text</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
revert saved newlines to visible<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>text to restore newlines from</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00507">507</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Wird benutzt von <a class="el" href="class_8template_8php-source.html#l00289">compress()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00508"></a>00508                 {
<a name="l00509"></a>00509                         $text = str_replace(chr(31), <span class="stringliteral">"\n"</span>, $text);
<a name="l00510"></a>00510                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ba6bb377466a0592aaedebe6a3518594"></a><!-- doxytag: member="Template::accepts_gzip" ref="ba6bb377466a0592aaedebe6a3518594" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.accepts_gzip           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
check, if browser is accepting gzip or not an return boolean<p>
<dl class="return" compact><dt><b>Rückgabe:</b></dt><dd>boolean returns TRUE or FALSE</dd></dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00521">521</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Wird benutzt von <a class="el" href="class_8template_8php-source.html#l00434">headers()</a> und <a class="el" href="class_8template_8php-source.html#l00313">output()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00522"></a>00522                 {
<a name="l00523"></a>00523                         <span class="keywordflow">if</span> (! isset($_SERVER[<span class="stringliteral">'HTTP_ACCEPT_ENCODING'</span>]))
<a name="l00524"></a>00524                                 {
<a name="l00525"></a>00525                                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00526"></a>00526                                 }
<a name="l00527"></a>00527                         $accept = str_replace(<span class="stringliteral">" "</span>, <span class="stringliteral">""</span>, strtolower($_SERVER[<span class="stringliteral">'HTTP_ACCEPT_ENCODING'</span>]));
<a name="l00528"></a>00528                         $accept = explode(<span class="stringliteral">","</span>, $accept);
<a name="l00529"></a>00529                         <span class="keywordflow">return</span> (in_array(<span class="stringliteral">"gzip"</span>, $accept) === <span class="keyword">true</span>);
<a name="l00530"></a>00530                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="339c7c8616136872dc7aa1571339d418"></a><!-- doxytag: member="Template::special_chars" ref="339c7c8616136872dc7aa1571339d418" args="(&amp;$content)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.special_chars           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>content</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
replace special chars to html-wellformed equivalents<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>text to transform</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00541">541</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Wird benutzt von <a class="el" href="class_8template_8php-source.html#l00269">get()</a> und <a class="el" href="class_8template_8php-source.html#l00313">output()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00542"></a>00542                 {
<a name="l00543"></a>00543                         $trans = array(
<a name="l00544"></a>00544                                      chr(228) =&gt; <span class="stringliteral">"&amp;auml;"</span>,
<a name="l00545"></a>00545                                      chr(246) =&gt; <span class="stringliteral">"&amp;ouml;"</span>,
<a name="l00546"></a>00546                                      chr(252) =&gt; <span class="stringliteral">"&amp;uuml;"</span>,
<a name="l00547"></a>00547                                      chr(196) =&gt; <span class="stringliteral">"&amp;Auml;"</span>,
<a name="l00548"></a>00548                                      chr(214) =&gt; <span class="stringliteral">"&amp;Ouml;"</span>,
<a name="l00549"></a>00549                                      chr(220) =&gt; <span class="stringliteral">"&amp;Uuml;"</span>,
<a name="l00550"></a>00550                                      chr(171) =&gt; <span class="stringliteral">"&amp;laquo;"</span>,
<a name="l00551"></a>00551                                      chr(187) =&gt; <span class="stringliteral">"&amp;raquo;"</span>,
<a name="l00552"></a>00552                                      chr(223) =&gt; <span class="stringliteral">"&amp;szlig;"</span>
<a name="l00553"></a>00553                                  );
<a name="l00554"></a>00554                         $content = strtr($content, $trans);
<a name="l00555"></a>00555                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="94df1a5e3d8270ecc99d74927f456372"></a><!-- doxytag: member="Template::create_select" ref="94df1a5e3d8270ecc99d74927f456372" args="($array, $selected=&quot;&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.create_select           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>selected</em> = <code>&quot;&quot;</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
return a generated select-html-tag with $selected<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mixed</em>&nbsp;</td><td>array or list of names separated with '|' to create a select menu from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>name of item selected (optional)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Rückgabe:</b></dt><dd>string html select menu</dd></dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00570">570</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00571"></a>00571                 {
<a name="l00572"></a>00572                         $ret = <span class="stringliteral">""</span>;
<a name="l00573"></a>00573                         
<a name="l00574"></a>00574                         <span class="keywordflow">if</span> (! is_array($array))
<a name="l00575"></a>00575                                 {
<a name="l00576"></a>00576                                         $array = explode(<span class="stringliteral">"|"</span>, $array);
<a name="l00577"></a>00577                                 }
<a name="l00578"></a>00578                                 
<a name="l00579"></a>00579                         <span class="keywordflow">if</span> (is_array($array) &amp;&amp; count($array) &gt; 0)
<a name="l00580"></a>00580                                 {
<a name="l00581"></a>00581                                         <span class="keywordflow">foreach</span>($array as $key =&gt; $value)
<a name="l00582"></a>00582                                         {
<a name="l00583"></a>00583                                                 <span class="keywordflow">if</span> (<span class="stringliteral">"$selected"</span> == <span class="stringliteral">"$value"</span> || <span class="stringliteral">"$selected"</span> == <span class="stringliteral">"$key"</span>)
<a name="l00584"></a>00584                                                         {
<a name="l00585"></a>00585                                                                 $ret.=<span class="stringliteral">"&lt;option value=\"$key\" selected=\"selected\"&gt;$value&lt;/option&gt;"</span>;
<a name="l00586"></a>00586                                                         }
<a name="l00587"></a>00587                                                 <span class="keywordflow">else</span>
<a name="l00588"></a>00588                                                         {
<a name="l00589"></a>00589                                                                 $ret.=<span class="stringliteral">"&lt;option value=\"$key\"&gt;$value&lt;/option&gt;"</span>;
<a name="l00590"></a>00590                                                         }
<a name="l00591"></a>00591                                         }
<a name="l00592"></a>00592                                 }
<a name="l00593"></a>00593                         <span class="keywordflow">return</span> $ret;
<a name="l00594"></a>00594                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="33f28ea990f28b657b61f54926452d79"></a><!-- doxytag: member="Template::replace_data_from_array" ref="33f28ea990f28b657b61f54926452d79" args="(&amp;$data, &amp;$array)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.replace_data_from_array           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>array</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
the assign method for complete arrays<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>index is set to $value from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>contains keys and values to set data</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00606">606</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00607"></a>00607                 {
<a name="l00608"></a>00608                         <span class="keywordflow">foreach</span>($array as $key =&gt; $value)
<a name="l00609"></a>00609                         {
<a name="l00610"></a>00610                                 $data[<span class="stringliteral">"&lt;!--"</span>.strtoupper($key).<span class="stringliteral">"--&gt;"</span>] = $value;
<a name="l00611"></a>00611                         }
<a name="l00612"></a>00612                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="8b6097874b0e2ad621bffe7a70ace60c"></a><!-- doxytag: member="Template::align_right" ref="8b6097874b0e2ad621bffe7a70ace60c" args="($text, $maxlen=16)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.align_right           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>maxlen</em> = <code>16</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
return a right trimmed text with estimated $maxlen width<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>text to align right </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>int</em>&nbsp;</td><td>width of line (=16 default)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Rückgabe:</b></dt><dd>string aligned text (filled with spaces)</dd></dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00626">626</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00627"></a>00627                 {
<a name="l00628"></a>00628                         $len = strlen($text);
<a name="l00629"></a>00629                         <span class="keywordflow">if</span> ($len &gt; $maxlen) <span class="keywordflow">return</span> $text;
<a name="l00630"></a>00630                         <span class="keywordflow">return</span> str_repeat(<span class="stringliteral">" "</span>, $maxlen - $len).$text;
<a name="l00631"></a>00631                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="2c26858a0833404049ac335d2dac3906"></a><!-- doxytag: member="Template::menu_insert_spacer" ref="2c26858a0833404049ac335d2dac3906" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.menu_insert_spacer           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set spacer to next menu entry<p>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00640">640</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00641"></a>00641                 {
<a name="l00642"></a>00642                         $this-&gt;menu_spacer = <span class="keyword">true</span>;
<a name="l00643"></a>00643                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0802cb2769b3aee83cf3458918a8fdd0"></a><!-- doxytag: member="Template::menu_insert_entry" ref="0802cb2769b3aee83cf3458918a8fdd0" args="($name, $href, $access_key=false, $selected=false, $target=&quot;_self&quot;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.menu_insert_entry           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>href</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>access_key</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>selected</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>target</em> = <code>&quot;_self&quot;</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
set new menu entry<p>
<dl compact><dt><b>Parameter:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>name of the menu entry </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>href of link </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>char</em>&nbsp;</td><td>access key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>changes class of entry, if true </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>target of link (default:_self)</td></tr>
  </table>
</dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00658">658</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00659"></a>00659                 {
<a name="l00660"></a>00660                         <span class="comment">// append session id, if no cookies in use</span>
<a name="l00661"></a>00661                         <span class="keywordflow">if</span> (ini_get(<span class="stringliteral">"session.use_cookies"</span>) != <span class="stringliteral">"1"</span>)
<a name="l00662"></a>00662                                 {
<a name="l00663"></a>00663                                         $sid = ini_get(<span class="stringliteral">"session.name"</span>).<span class="stringliteral">"="</span>.session_id();
<a name="l00664"></a>00664                                         $href .= (strpos($href,<span class="stringliteral">"?"</span>)===<span class="keyword">false</span>)?(<span class="stringliteral">"?"</span>.$sid):(<span class="stringliteral">"&amp;amp;"</span>.$sid);
<a name="l00665"></a>00665                                 }
<a name="l00666"></a>00666                         <span class="comment">// check for preset spacer for next entry</span>
<a name="l00667"></a>00667                         $return  = ($this-&gt;menu_spacer) ? <span class="stringliteral">'&lt;li class="spacer"&gt;'</span> : <span class="stringliteral">'&lt;li&gt;'</span>;
<a name="l00668"></a>00668                         $return .= <span class="stringliteral">'&lt;a '</span>.(is_string($access_key) ? <span class="stringliteral">'accesskey="'</span>.$access_key.<span class="stringliteral">'" '</span> : <span class="stringliteral">''</span>);
<a name="l00669"></a>00669                         $return .= ($selected ? <span class="stringliteral">'class="selected" '</span> : <span class="stringliteral">''</span>).<span class="stringliteral">'href="'</span>.$href.<span class="stringliteral">'" target="'</span>.$target.<span class="stringliteral">'"&gt;'</span>.$name.<span class="stringliteral">'&lt;/a&gt;&lt;/li&gt;'</span>;
<a name="l00670"></a>00670                         <span class="comment">// reset spacer</span>
<a name="l00671"></a>00671                         $this-&gt;menu_spacer   = <span class="keyword">false</span>;
<a name="l00672"></a>00672                         $this-&gt;menu_content .= $return;
<a name="l00673"></a>00673                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0d22097e1bf560ef7d4aba58c7b1e7fe"></a><!-- doxytag: member="Template::menu_get" ref="0d22097e1bf560ef7d4aba58c7b1e7fe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.menu_get           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
return menu string<p>
<dl class="return" compact><dt><b>Rückgabe:</b></dt><dd>string menu entry</dd></dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00684">684</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

<p>Wird benutzt von <a class="el" href="class_8template_8php-source.html#l00313">output()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00685"></a>00685                 {
<a name="l00686"></a>00686                         $return = <span class="stringliteral">'&lt;ul id="main_menu"&gt;'</span>.$this-&gt;menu_content.<span class="stringliteral">'&lt;/ul&gt;'</span>;
<a name="l00687"></a>00687                         $this-&gt;menu_content = <span class="stringliteral">""</span>;
<a name="l00688"></a>00688                         <span class="keywordflow">return</span> $return;
<a name="l00689"></a>00689                 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="13f26a9fe366b92f0897785a3d01f9be"></a><!-- doxytag: member="Template::use_database" ref="13f26a9fe366b92f0897785a3d01f9be" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.use_database           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
return true, if needed settings for database access are present<p>
<dl class="return" compact><dt><b>Rückgabe:</b></dt><dd>boolean</dd></dl>
public<p>
<dl class="author" compact><dt><b>Autor:</b></dt><dd>patrick.kracht, thorsten.moll </dd></dl>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00700">700</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00701"></a>00701                 {
<a name="l00702"></a>00702                         <span class="keywordflow">return</span> ($_SESSION[<span class="stringliteral">"_TplSqlTable"</span>] &amp;&amp; $_SESSION[<span class="stringliteral">"_SqlType"</span>]);
<a name="l00703"></a>00703                 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Dokumentation der Datenelemente</h2>
<a class="anchor" name="0aa730ee4f211368b447c6e3a52c935c"></a><!-- doxytag: member="Template::$template" ref="0aa730ee4f211368b447c6e3a52c935c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.$template = array()<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Erneute Implementation in <a class="el" href="class_email.html#d8eb53eb33d7c27216c93c9fe711a7ae">Email</a>.</p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00014">14</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="d330a17c8ff788dcba48bd00e1d64eb2"></a><!-- doxytag: member="Template::$assigned" ref="d330a17c8ff788dcba48bd00e1d64eb2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.$assigned = array()<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00015">15</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="f6525f2432c8c870c5c25091098aba7c"></a><!-- doxytag: member="Template::$debug_off" ref="f6525f2432c8c870c5c25091098aba7c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.$debug_off = true<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00016">16</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="8f80b6b931c01e6795bed770fb0605d6"></a><!-- doxytag: member="Template::$do_compress" ref="8f80b6b931c01e6795bed770fb0605d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.$do_compress = true<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00017">17</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="ef233f4654c3c598680b132012fa6800"></a><!-- doxytag: member="Template::$sql_table" ref="ef233f4654c3c598680b132012fa6800" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.$sql_table = false<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00018">18</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="848a4caabd12c5c9bb39a5a4496693e8"></a><!-- doxytag: member="Template::$sql_type" ref="848a4caabd12c5c9bb39a5a4496693e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.$sql_type = false<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00019">19</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="7824aefa3d521797b04ec59ea5166861"></a><!-- doxytag: member="Template::$debugout" ref="7824aefa3d521797b04ec59ea5166861" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.$debugout = &quot;&quot;<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00020">20</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="70c2f52d8d0837df5d73da6969b964c3"></a><!-- doxytag: member="Template::$menu_content" ref="70c2f52d8d0837df5d73da6969b964c3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.$menu_content = &quot;&quot;<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00021">21</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="a5a9b9e6807c0377a4ac37a1f4e1eb20"></a><!-- doxytag: member="Template::$menu_spacer" ref="a5a9b9e6807c0377a4ac37a1f4e1eb20" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.$menu_spacer = false<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00022">22</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="c99b87e6e1e3d0106f24bcd6681c906e"></a><!-- doxytag: member="Template::$tpl_folder" ref="c99b87e6e1e3d0106f24bcd6681c906e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Template.$tpl_folder = &quot;./templates/&quot;<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definiert in Zeile <a class="el" href="class_8template_8php-source.html#l00023">23</a> der Datei <a class="el" href="class_8template_8php-source.html">class.template.php</a>.</p>

</div>
</div><p>
<hr>Die Dokumentation für diese Klasse wurde erzeugt aufgrund der Datei:<ul>
<li>C:/xampp/htdocs/TimeRecording/<a class="el" href="class_8template_8php-source.html">class.template.php</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Erzeugt am Sun Jun 22 22:41:08 2008 für TimeRecording von&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
